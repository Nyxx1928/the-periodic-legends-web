<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <!-- Existing head content remains unchanged -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Contact Us</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    backdropBlur: {
                        xs: '2px',
                        sm: '4px',
                        md: '8px',
                    },
                    backgroundOpacity: {
                        10: '0.1',
                        15: '0.15',
                    },
                    borderOpacity: {
                        20: '0.2',
                    },
                    keyframes: {
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 5px rgba(234, 179, 8, 0.3)' },
                            '50%': { boxShadow: '0 0 20px rgba(234, 179, 8, 0.6)' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(50px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)', opacity: '0.7' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    },
                    animation: {
                        pulseGlow: 'pulseGlow 2s ease-in-out infinite',
                        slideUp: 'slideUp 0.6s ease-out',
                        bounceIn: 'bounceIn 0.5s ease-out',
                        fadeIn: 'fadeIn 0.4s ease-in',
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"/>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <style>
        html, body {
            width: 100%;
            overflow-x: hidden;
        }
        * {
            box-sizing: border-box;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .glass-effect:hover {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 4px 15px rgba(234, 179, 8, 0.2);
        }
        .btn-glow {
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }
        .btn-glow:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(234, 179, 8, 0.4);
        }
        .nav-link {
            position: relative;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #eab308;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        /* Mobile-specific improvements */
        @media (max-width: 640px) {
            #signInModal > div, #contactModal > div {
                margin: 1rem;
            }
            input[type="text"], input[type="email"], input[type="password"], textarea, select {
                font-size: 16px; /* Prevents zoom on iOS */
            }
        }
.faq-answer {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: max-height 0.4s ease-out, opacity 0.4s ease-out, padding 0.4s ease-out;
    padding: 0 1rem;
}
.faq-answer.active {
    max-height: 1000px; /* Increased to accommodate longer answers */
    opacity: 1;
    padding: 1rem;
}
.iframe-container {
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .iframe-container:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-black text-white pt-16" style="font-family: 'Inter', sans-serif;" data-aos-easing="ease-out-back" data-aos-duration="800">
    <!-- Header, Mobile Menu, Sign In Modal, Contact Hero, Contact Options, Contact Form remain unchanged -->
    <header id="navbar" class="glass-effect px-8 py-4 md:px-48 flex justify-between items-center fixed top-0 w-full z-50" data-aos="fade-down" data-aos-duration="600">
        <div class="flex items-center space-x-4 md:space-x-16">
            <a href="index.html" class="flex items-center">
                <img alt="TPL Logo" src="Assets/Group 17.png" class="w-10 h-10 transition-transform duration-300 hover:scale-110">
                <span class="ml-3 font-bold tracking-wide text-3xl">TPL</span>
            </a>
            <nav class="hidden md:flex space-x-6">
                <a href="index.html" class="hover:text-yellow-300 nav-link">Overview</a>
                <a href="Home_About.html" class="hover:text-yellow-300 nav-link">About us</a>
                <a href="Home_Contact.html" class="text-yellow-300 nav-link">Contact</a>
                <a href="index.html#download" class="hover:text-yellow-300 nav-link">Download</a>
            </nav>
        </div>
        <div class="hidden md:flex space-x-4">
            <button id="signInBtn" class="bg-transparent border border-yellow-500 text-yellow-500 px-4 py-2 rounded btn-glow hover:bg-yellow-500 hover:text-black">Sign In</button>
        </div>
        <button id="menu-toggle" class="md:hidden text-white text-2xl">
            <i class="fas fa-bars"></i>
        </button>
    </header>

    <div id="mobile-menu" class="fixed top-0 right-0 glass-effect w-1/2 h-screen z-50 flex flex-col px-6 py-6 space-y-4 transform translate-x-full transition-transform duration-500 ease-in-out">
        <button id="menu-close" class="text-white text-2xl self-end">
            <i class="fas fa-times"></i>
        </button>
        <nav class="flex flex-col space-y-4">
            <a href="index.html" class="text-lg text-white hover:text-yellow-300 px-4 py-2 rounded-lg transition">Overview</a>
            <a href="Home_About.html" class="text-lg text-white hover:text-yellow-300 px-4 py-2 rounded-lg transition">About us</a>
            <a href="Home_Contact.html" class="text-lg text-yellow-300 px-4 py-2 rounded-lg transition">Contact</a>
            <a href="index.html#download" class="text-lg text-white hover:text-yellow-300 px-4 py-2 rounded-lg transition">Download</a>
        </nav>
        <div class="flex justify-center">
            <button id="signInMobileBtn" class="bg-transparent border border-yellow-500 text-yellow-500 px-4 py-2 mt-12 rounded btn-glow hover:bg-yellow-500 hover:text-black">Sign In</button>
        </div>
    </div>

    <div id="signInModal" class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center hidden z-50 p-4">
        <div class="glass-effect p-6 md:p-8 rounded-lg w-full max-w-sm shadow-lg relative animation-bounceIn">
            <button id="closeModal" class="absolute top-3 right-3 text-gray-400 hover:text-yellow-300 text-2xl transition-colors duration-200">&times;</button>
            <h2 class="text-xl font-bold mb-4">Sign in to TPL</h2>
            
            <!-- Unified Form -->
            <div id="unifiedForm">
                <input type="text" id="user-id" placeholder="Enter your ID" maxlength="6" inputmode="numeric" pattern="[0-9]{6}" class="w-full mb-2 px-4 py-2 rounded bg-[#171819] border border-[#202221] focus:ring-2 focus:ring-yellow-500 focus:outline-none text-yellow-500 transition-all duration-300">
                <div class="relative mb-4">
                    <input type="password" id="user-password" placeholder="Enter your password" class="w-full pr-10 px-4 py-2 rounded bg-[#171819] border border-[#202221] focus:ring-2 focus:ring-yellow-500 focus:outline-none text-yellow-500 transition-all duration-300">
                    <i id="togglePassword" class="fas fa-eye absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-yellow-500 cursor-pointer"></i>
                </div>
                <button id="unifiedSignInBtn" class="w-full bg-yellow-500 text-black px-4 py-3 rounded btn-glow hover:bg-yellow-600 min-h-[44px] font-medium">Sign In</button>
                <p id="message" class="mt-3 text-center text-sm"></p>
            </div>
        </div>
    </div>

    <section class="pt-20 md:pt-32 pb-12 md:pb-16 px-4 sm:px-6 md:px-16" data-aos="fade-up" data-aos-delay="200">
        <div class="max-w-4xl mx-auto text-center">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-4 md:mb-6 px-4 bg-gradient-to-r from-white via-yellow-100 to-yellow-200 bg-clip-text text-transparent">Contact Us</h1>
            <p class="text-base sm:text-lg md:text-xl mb-6 md:mb-8 text-gray-300 px-4 leading-relaxed">Have questions about The Periodic Legends? We're here to help educators, students, and parents at Caloocan High School get the most out of our Earth Science RPG platform.</p>
        </div>
    </section>

    <section class="py-8 md:py-12 px-4 sm:px-6 md:px-16" data-aos="fade-up" data-aos-delay="400">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
                <div class="glass-effect p-6 md:p-8 rounded-lg text-center animation-pulseGlow" data-aos="zoom-in" data-aos-delay="200">
                    <div class="w-14 h-14 md:w-16 md:h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6">
                        <i class="fas fa-headset text-xl md:text-2xl text-black"></i>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold mb-2 md:mb-3 text-yellow-400">Technical Support</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-4 md:mb-6 leading-relaxed">Need help with app installation, account setup, or troubleshooting?</p>
                    <a href="#support-form" class="text-yellow-500 hover:text-yellow-400 nav-link text-sm md:text-base">Get Technical Support</a>
                </div>
                <div class="glass-effect p-6 md:p-8 rounded-lg text-center animation-pulseGlow" data-aos="zoom-in" data-aos-delay="400">
                    <div class="w-14 h-14 md:w-16 md:h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6">
                        <i class="fas fa-chalkboard-teacher text-xl md:text-2xl text-black"></i>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold mb-2 md:mb-3 text-yellow-400">Educational Inquiries</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-4 md:mb-6 leading-relaxed">Questions about curriculum integration, lesson plans, or content?</p>
                    <a href="#teacher-form" class="text-yellow-500 hover:text-yellow-400 nav-link text-sm md:text-base">Connect with Education Team</a>
                </div>
                <div class="glass-effect p-6 md:p-8 rounded-lg text-center animation-pulseGlow" data-aos="zoom-in" data-aos-delay="600">
                    <div class="w-14 h-14 md:w-16 md:h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-6">
                        <i class="fas fa-handshake text-xl md:text-2xl text-black"></i>
                    </div>
                    <h3 class="text-lg md:text-xl font-bold mb-2 md:mb-3 text-yellow-400">Partnerships</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-4 md:mb-6 leading-relaxed">Interested in collaborating or becoming a distribution partner?</p>
                    <a href="#partner-form" class="text-yellow-500 hover:text-yellow-400 nav-link text-sm md:text-base">Explore Partnerships</a>
                </div>
            </div>
        </div>
    </section>

    <section id="support-form" class="py-12 md:py-16 px-4 sm:px-6 md:px-16 bg-gradient-to-b from-black to-[#101010]" data-aos="fade-up" data-aos-delay="600">
        <div class="max-w-4xl mx-auto">
            <div class="glass-effect rounded-lg p-6 md:p-8 lg:p-12">
                <h2 class="text-xl md:text-2xl font-bold mb-4 md:mb-6">Get in Touch</h2>
                <p class="text-sm md:text-base text-gray-400 mb-6 md:mb-8">Fill out the form below, and our team will respond within 24-48 hours.</p>
                <div id="contact-message" class="text-center text-sm mb-4"></div>
                <form id="contact-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-4 md:mb-6">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-300 mb-1">Your Name</label>
                            <input type="text" id="name" name="name" class="w-full px-4 py-3 rounded bg-[#202221] border border-gray-700 focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white transition-all duration-300 min-h-[44px]" required>
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-300 mb-1">Email Address</label>
                            <input type="email" id="email" name="email" class="w-full px-4 py-3 rounded bg-[#202221] border border-gray-700 focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white transition-all duration-300 min-h-[44px]" required>
                        </div>
                    </div>
                    <div class="mb-4 md:mb-6">
                        <label for="inquiry-type" class="block text-sm font-medium text-gray-300 mb-1">I'm contacting about</label>
                        <select id="inquiry-type" name="inquiry-type" class="w-full px-4 py-3 rounded bg-[#202221] border border-gray-700 focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white transition-all duration-300 min-h-[44px]">
                            <option value="technical">Technical Support</option>
                            <option value="educational">Educational Questions</option>
                            <option value="partnership">Partnership Opportunities</option>
                            <option value="feedback">Feedback & Suggestions</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="mb-4 md:mb-6">
                        <label for="message" class="block text-sm font-medium text-gray-300 mb-1">Your Message</label>
                        <textarea id="contact-message-text" name="message" rows="5" class="w-full px-4 py-3 rounded bg-[#202221] border border-gray-700 focus:ring-2 focus:ring-yellow-500 focus:outline-none text-white transition-all duration-300" required></textarea>                    </div>
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                        <div class="flex items-center">
                            <input type="checkbox" id="newsletter" name="newsletter" class="mr-2 text-yellow-500 focus:ring-yellow-500 w-5 h-5">
                            <label for="newsletter" class="text-sm text-gray-300">Subscribe to our newsletter</label>
                        </div>
                        <button type="submit" class="w-full sm:w-auto bg-yellow-500 text-black px-6 md:px-8 py-3 rounded-lg btn-glow hover:bg-yellow-600 min-h-[44px] font-medium">Send Message</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="py-12 md:py-20 px-4 sm:px-6 md:px-16" data-aos="fade-up" data-aos-delay="800">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-2xl md:text-3xl font-bold mb-8 md:mb-12 text-center px-4">Frequently Asked Questions</h2>
            <div class="space-y-4 md:space-y-6">
                <!-- FAQ Item 1 -->
                <div class="glass-effect rounded-lg p-5 md:p-6">
                    <button class="faq-toggle flex justify-between items-center w-full text-left focus:outline-none min-h-[44px]" data-aos="fade-up" data-aos-delay="100">
                        <h3 class="text-base md:text-lg font-medium text-yellow-400 pr-4">How do I get started with The Periodic Legends in my classroom?</h3>
                        <svg class="w-5 h-5 md:w-6 md:h-6 text-yellow-500 transform transition-transform duration-300 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-answer mt-4 hidden text-gray-400">
                        <p class="text-sm md:text-base leading-relaxed">Getting started is simple! First, download the app from our website or Google Play Store. Create a teacher account at Caloocan High School and follow the step-by-step guide to set up your classroom. Invite students using a class code. We provide implementation guides and lesson plans aligned with the Philippine K-12 curriculum for Earth Science.</p>
                    </div>
                </div>
                <!-- FAQ Item 2 -->
                <div class="glass-effect rounded-lg p-5 md:p-6">
                    <button class="faq-toggle flex justify-between items-center w-full text-left focus:outline-none min-h-[44px]" data-aos="fade-up" data-aos-delay="200">
                        <h3 class="text-base md:text-lg font-medium text-yellow-400 pr-4">Can I customize quiz questions to match my curriculum?</h3>
                        <svg class="w-5 h-5 md:w-6 md:h-6 text-yellow-500 transform transition-transform duration-300 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-answer mt-4 hidden text-gray-400">
                        <p class="text-sm md:text-base leading-relaxed">Yes! Teachers at Caloocan High School can use the Question Editor tool to modify existing questions or create custom ones. Organize these into quiz sets that align with the General Academic Strand (GAS) Earth Science curriculum.</p>
                    </div>
                </div>
                <!-- FAQ Item 3 -->
                <div class="glass-effect rounded-lg p-5 md:p-6">
                    <button class="faq-toggle flex justify-between items-center w-full text-left focus:outline-none min-h-[44px]" data-aos="fade-up" data-aos-delay="300">
                        <h3 class="text-base md:text-lg font-medium text-yellow-400 pr-4">How does the app track student progress?</h3>
                        <svg class="w-5 h-5 md:w-6 md:h-6 text-yellow-500 transform transition-transform duration-300 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-answer mt-4 hidden text-gray-400">
                        <p class="text-sm md:text-base leading-relaxed">The Periodic Legends offers a dashboard for teachers to track student progress across Earth Science topics. View analytics like quiz scores, quest completion, time spent, and mastery levels. Reports can be exported for records or parent meetings at Caloocan High School.</p>
                    </div>
                </div>
                <!-- FAQ Item 4 -->
                <div class="glass-effect rounded-lg p-5 md:p-6">
                    <button class="faq-toggle flex justify-between items-center w-full text-left focus:outline-none min-h-[44px]" data-aos="fade-up" data-aos-delay="400">
                        <h3 class="text-base md:text-lg font-medium text-yellow-400 pr-4">What age groups is The Periodic Legends appropriate for?</h3>
                        <svg class="w-5 h-5 md:w-6 md:h-6 text-yellow-500 transform transition-transform duration-300 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-answer mt-4 hidden text-gray-400">
                        <p class="text-sm md:text-base leading-relaxed">The app is designed for General Academic Strand (GAS) students at Caloocan High School, typically grades 11-12 (ages 16-18). Difficulty settings adjust to ensure content is challenging yet accessible, with teachers able to customize levels for individual students.</p>
                    </div>
                </div>
                <!-- FAQ Item 5 -->
                <div class="glass-effect rounded-lg p-5 md:p-6">
                    <button class="faq-toggle flex justify-between items-center w-full text-left focus:outline-none min-h-[44px]" data-aos="fade-up" data-aos-delay="500">
                        <h3 class="text-base md:text-lg font-medium text-yellow-400 pr-4">Is the app aligned with educational standards?</h3>
                        <svg class="w-5 h-5 md:w-6 md:h-6 text-yellow-500 transform transition-transform duration-300 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="faq-answer mt-4 hidden text-gray-400">
                        <p class="text-sm md:text-base leading-relaxed">Yes! Content is aligned with the Philippine K-12 curriculum for Earth Science, specifically for GAS students. Our team ensures regular updates to meet DepEd standards, with clear indications of which standards each quiz or lesson addresses.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Direct Contact Methods, Map Section, Footer, Footer Modals, Contact Form Modal remain unchanged -->
    <section class="py-12 md:py-16 px-4 sm:px-6 md:px-16 bg-[#0d0d0d]" data-aos="fade-up" data-aos-delay="1000">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-xl md:text-2xl font-bold mb-6 md:mb-8 text-center px-4">Other Ways to Reach Us</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 text-center">
                <div class="glass-effect p-5 md:p-6 rounded-lg animation-pulseGlow" data-aos="zoom-in" data-aos-delay="200">
                    <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-envelope text-xl text-black"></i>
                    </div>
                    <h3 class="text-base md:text-lg font-bold mb-2 text-yellow-400">Email Us</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-3">For general inquiries:</p>
                    <a href="mailto:info@periodiclegends.com" class="text-yellow-500 hover:text-yellow-400 nav-link text-sm md:text-base break-all">info@periodiclegends.com</a>
                    <p class="text-sm md:text-base text-gray-400 mt-3 mb-1">For technical support:</p>
                    <a href="mailto:support@periodiclegends.com" class="text-yellow-500 hover:text-yellow-400 nav-link text-sm md:text-base break-all">support@periodiclegends.com</a>
                </div>
                <div class="glass-effect p-5 md:p-6 rounded-lg animation-pulseGlow" data-aos="zoom-in" data-aos-delay="400">
                    <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-phone-alt text-xl text-black"></i>
                    </div>
                    <h3 class="text-base md:text-lg font-bold mb-2 text-yellow-400">Call Us</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-3">Customer Service:</p>
                    <a href="tel:+639123456789" class="text-yellow-500 hover:text-yellow-400 nav-link text-sm md:text-base">+63 (912) 345-6789</a>
                    <p class="text-sm md:text-base text-gray-400 mt-3 mb-1">Business Hours:</p>
                    <p class="text-sm md:text-base text-white">Mon-Fri: 8am - 5pm PHT</p>
                </div>
                <div class="glass-effect p-5 md:p-6 rounded-lg animation-pulseGlow" data-aos="zoom-in" data-aos-delay="600">
                    <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-share-alt text-xl text-black"></i>
                    </div>
                    <h3 class="text-base md:text-lg font-bold mb-2 text-yellow-400">Follow Us</h3>
                    <p class="text-sm md:text-base text-gray-400 mb-4">Stay updated with news and tips</p>
                    <div class="flex justify-center space-x-4">
                        <a href="https://x.com/periodiclegends" class="text-white hover:text-yellow-500 transition min-h-[44px] min-w-[44px] flex items-center justify-center">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="https://facebook.com/periodiclegends" class="text-white hover:text-yellow-500 transition min-h-[44px] min-w-[44px] flex items-center justify-center">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="https://instagram.com/periodiclegends" class="text-white hover:text-yellow-500 transition min-h-[44px] min-w-[44px] flex items-center justify-center">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="https://youtube.com/@periodiclegends" class="text-white hover:text-yellow-500 transition min-h-[44px] min-w-[44px] flex items-center justify-center">
                            <i class="fab fa-youtube text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="pt-12 md:pt-16 pb-0 px-4 sm:px-6 md:px-16" data-aos="fade-up" data-aos-delay="1200">
        <div class="max-w-7xl mx-auto text-center mb-8 md:mb-12">
            <h2 class="text-xl md:text-2xl font-bold mb-3 md:mb-4 px-4">Our Location</h2>
            <p class="text-sm md:text-base text-gray-400 mb-6 md:mb-8 px-4">Visit our educational technology center at Caloocan High School</p>
            <div class="w-full h-64 md:h-96 glass-effect rounded-lg overflow-hidden iframe-container mx-4 md:mx-0">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3860.4006436853384!2d120.9838304!3d14.6264564!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3397b5d9d94bb53f%3A0xa45a0c9b85be77e!2sP.%20Sevilla%20St%20%26%2010th%20Ave%2C%20Grace%20Park%20West%2C%20Caloocan%2C%201401%20Metro%20Manila%2C%20Philippines!5e0!3m2!1sen!2sph!4v1685111111111" 
                    width="100%" 
                    height="100%" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <div class="mt-6 md:mt-8 glass-effect inline-block px-6 md:px-8 py-4 md:py-6 rounded-lg animation-pulseGlow mx-4 md:mx-0">
                <p class="text-base md:text-lg">P. Sevilla St. Cor. 10th Avenue</p>
                <p class="text-base md:text-lg">West Grace Park, Caloocan, Philippines</p>
            </div>
        </div>
    </section>

    <footer class="py-16 md:py-40" style="background: linear-gradient(to top, #000000, #000000 60%, #414141 100%);" data-aos="fade-up" data-aos-delay="1400">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 md:gap-8 text-sm">
            <div>
                <img alt="TPL Logo" src="Assets/Group 17.png" class="w-12 h-12 mb-4 transition-transform duration-300 hover:scale-110">
                <h3 class="text-lg font-bold text-yellow-500 mb-2">The Periodic Legends</h3>
                <p class="mb-4 text-gray-400">Earth science adventure learning platform for GAS students</p>
            </div>
            <div>
                <h3 class="mb-4 font-bold">GET STARTED</h3>
                <ul class="space-y-2">
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-globe mr-2 text-yellow-400"></i> Web Analytics
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fab fa-android mr-2 text-yellow-400"></i> Android Download
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-user-graduate mr-2 text-yellow-400"></i> Student Login
                        </a>
                    </li>
                </ul>
            </div>
            <div>
                <h3 class="mb-4 font-bold">COMPANY</h3>
                <ul class="space-y-2">
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-info-circle mr-2 text-yellow-400"></i> About Us
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-envelope mr-2 text-yellow-400"></i> Contact
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-blog mr-2 text-yellow-400"></i> Blog
                        </a>
                    </li>
                </ul>
            </div>
            <div>
                <h3 class="mb-4 font-bold">RESOURCES</h3>
                <ul class="space-y-2">
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-question-circle mr-2 text-yellow-400"></i> Help Center
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-shield-alt mr-2 text-yellow-400"></i> Privacy Policy
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="#">
                            <i class="fas fa-file-contract mr-2 text-yellow-400"></i> Terms of Service
                        </a>
                    </li>
                    <li class="mb-2">
                        <a class="text-white hover:text-yellow-300 flex items-center nav-link" href="Teacher_Registration.html">
                            <i class="fas fa-chalkboard-teacher mr-2 text-yellow-400"></i> For Teachers
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-4 mt-16 pt-8 border-t border-gray-800 text-center">
            <p class="text-gray-500">© 2025 The Periodic Legends. All rights reserved.</p>
        </div>
    </footer>

    <div id="footerModals" class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center hidden z-50 p-4">
        <div id="modalContent" class="glass-effect rounded-lg max-w-2xl max-h-[80vh] overflow-y-auto"></div>
    </div>

    <div id="contactModal" class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center hidden z-50 p-4">
        <div class="glass-effect p-6 md:p-8 rounded-lg w-full max-w-sm shadow-lg relative animation-bounceIn">
            <button id="closeContactModal" class="absolute top-3 right-3 text-gray-400 hover:text-yellow-300 text-2xl transition-colors duration-200">&times;</button>
            <h2 class="text-xl font-bold mb-4">Message Status</h2>
            <p id="contactModalMessage" class="text-center text-gray-300 text-sm md:text-base"></p>
            <div class="mt-6 flex justify-center">
                <button id="closeContactModalBtn" class="bg-yellow-500 text-black px-6 py-3 rounded btn-glow hover:bg-yellow-600 min-h-[44px] font-medium">Close</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
    /*
     * EMAILJS SETUP INSTRUCTIONS:
     * 1. Sign up for a free account at https://www.emailjs.com/
     * 2. Go to Email Services and add Gmail as a service
     * 3. Go to Email Templates and create a new template with:
     *    - Subject: New Contact Inquiry from {{from_name}}
     *    - Content: 
     *      Name: {{from_name}}
     *      Email: {{from_email}}
     *      Inquiry Type: {{inquiry_type}}
     *      Newsletter Subscription: {{newsletter}}
     *      Message: {{message}}
     * 4. Go to Account > API Keys and copy your Public Key
     * 5. Replace YOUR_EMAILJS_PUBLIC_KEY, YOUR_SERVICE_ID, and YOUR_TEMPLATE_ID below
     */
    document.addEventListener('DOMContentLoaded', function() {
        AOS.init({
            duration: 800,
            once: false,
            easing: 'ease-out-back',
            offset: 100,
        });

        // Initialize EmailJS - Replace with your actual public key
        // Get from: https://dashboard.emailjs.com/admin/integration
        if (typeof emailjs !== 'undefined') {
            emailjs.init("jics1CK0DJRs4IO-D"); // Replace with your EmailJS public key
        }

        // Password toggle functionality for unified form
        const userPasswordInput = document.getElementById('user-password');
        const togglePasswordIcon = document.getElementById('togglePassword');
        
        if (togglePasswordIcon && userPasswordInput) {
            togglePasswordIcon.addEventListener('click', function() {
                const type = userPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                userPasswordInput.setAttribute('type', type);
                this.classList.toggle('fa-eye');
                this.classList.toggle('fa-eye-slash');
            });
        }

        // Unified sign in button
        const unifiedSignInBtn = document.getElementById('unifiedSignInBtn');
        if (unifiedSignInBtn) {
            unifiedSignInBtn.addEventListener('click', loginUnified);
        }

        // Restrict user ID input to only 6 numbers
        const userIdInput = document.getElementById('user-id');
        if (userIdInput) {
            userIdInput.addEventListener('input', function(e) {
                // Remove any non-numeric characters
                this.value = this.value.replace(/[^0-9]/g, '');
                // Limit to 6 digits
                if (this.value.length > 6) {
                    this.value = this.value.slice(0, 6);
                }
            });

            // Prevent paste of non-numeric characters
            userIdInput.addEventListener('paste', function(e) {
                e.preventDefault();
                const paste = (e.clipboardData || window.clipboardData).getData('text');
                const numbersOnly = paste.replace(/[^0-9]/g, '').slice(0, 6);
                this.value = numbersOnly;
            });
        }

        // Contact form submission
        const contactForm = document.getElementById('contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                await handleContactFormSubmission();
            });
        }

        // FAQ accordion functionality
        const faqToggles = document.querySelectorAll('.faq-toggle');
        faqToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                const answer = this.nextElementSibling;
                const icon = this.querySelector('svg');
                const isOpen = !answer.classList.contains('hidden');

                // Close all other FAQs
                document.querySelectorAll('.faq-answer').forEach(otherAnswer => {
                    if (otherAnswer !== answer && !otherAnswer.classList.contains('hidden')) {
                        otherAnswer.classList.add('hidden');
                        otherAnswer.classList.remove('active');
                        const otherIcon = otherAnswer.previousElementSibling.querySelector('svg');
                        if (otherIcon) {
                            otherIcon.classList.remove('rotate-180');
                        }
                    }
                });

                // Toggle the clicked FAQ
                if (isOpen) {
                    answer.classList.add('hidden');
                    answer.classList.remove('active');
                    if (icon) {
                        icon.classList.remove('rotate-180');
                    }
                } else {
                    answer.classList.remove('hidden');
                    answer.classList.add('active');
                    if (icon) {
                        icon.classList.add('rotate-180');
                    }
                    // Dynamically set max-height for smooth transition
                    answer.style.maxHeight = `${answer.scrollHeight}px`;
                }
            });
        });

        // Footer modal functionality
        function openFooterModal(title, content) {
            const modal = document.getElementById('footerModals');
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-yellow-400">${title}</h2>
                        <button id="closeFooterModal" class="text-white text-2xl hover:text-yellow-300 transition-colors duration-200">&times;</button>
                    </div>
                    <div class="text-gray-200">${content}</div>
                    <div class="mt-6 flex justify-end">
                        <button class="close-footer-btn bg-yellow-500 text-black px-6 py-2 rounded btn-glow hover:bg-yellow-600">Close</button>
                    </div>
                </div>
            `;
            modal.classList.remove('hidden');
            const closeButton = modalContent.querySelector('#closeFooterModal');
            const footerCloseButton = modalContent.querySelector('.close-footer-btn');
            if (closeButton) {
                closeButton.addEventListener('click', closeFooterModal);
            }
            if (footerCloseButton) {
                footerCloseButton.addEventListener('click', closeFooterModal);
            }
        }

        function closeFooterModal() {
            const modal = document.getElementById('footerModals');
            if (modal) {
                modal.classList.add('hidden');
            }
        }

        const footerLinks = document.querySelectorAll('footer a[href="#"]');
        footerLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const linkText = this.textContent.trim().toLowerCase();
                const footerContent = {
                    'web analytics': `
                        <div class="space-y-4">
                            <p><strong>Web Analytics Dashboard</strong></p>
                            <p>Access real-time analytics for tracking student progress and engagement in Earth Science, designed for teachers at Caloocan High School.</p>
                            <div class="glass-effect p-4 rounded-lg">
                                <h4 class="text-yellow-400 mb-2">Features:</h4>
                                <ul class="list-disc list-inside text-sm space-y-1">
                                    <li>Monitor individual student quiz performance</li>
                                    <li>Track quest completion rates</li>
                                    <li>View class-wide engagement metrics</li>
                                    <li>Customize interventions based on data</li>
                                </ul>
                            </div>
                            <p class="text-sm text-gray-400 mt-4">Requires: Latest Chrome, Firefox, or Edge browser, 5 Mbps internet, 1366x768 resolution</p>
                        </div>
                    `,
                    'android download': `
                        <div class="space-y-4">
                            <p><strong>Android Mobile App</strong></p>
                            <p>Download The Periodic Legends for Android to engage in Earth Science adventures through interactive gameplay.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                                <div class="glass-effect p-3 rounded-lg">
                                    <h4 class="text-yellow-400">System Requirements</h4>
                                    <ul class="text-sm mt-2 space-y-1">
                                        <li>Android 8.0 (API 26) or higher</li>
                                        <li>Quad-core 1.5 GHz processor</li>
                                        <li>2 GB RAM</li>
                                        <li>200 MB free storage</li>
                                        <li>720x1280 resolution</li>
                                    </ul>
                                </div>
                                <div class="glass-effect p-3 rounded-lg">
                                    <h4 class="text-yellow-400">Features</h4>
                                    <ul class="text-sm mt-2 space-y-1">
                                        <li>Curriculum-aligned quests</li>
                                        <li>Interactive quizzes</li>
                                        <li>Turn-based combat system</li>
                                        <li>Progress syncing with web analytics</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="text-sm text-gray-400">Version 1.2.3 | Requires stable internet for login and syncing</p>
                        </div>
                    `,
                    'student login': `
                        <div class="space-y-4">
                            <p><strong>Student Portal Access</strong></p>
                            <p>Login to access your personalized Earth Science learning dashboard, designed for GAS students at Caloocan High School.</p>
                            <div class="glass-effect p-4 rounded-lg">
                                <h4 class="text-green-400 mb-2">Quick Access:</h4>
                                <button onclick="document.getElementById('signInBtn').click();" class="bg-green-500 text-black px-4 py-2 rounded btn-glow hover:bg-green-600 mr-2">Student Login</button>
                                <p class="text-sm mt-2">Use your Student ID and password to access:</p>
                                <ul class="list-disc list-inside text-sm text-gray-300 mt-1">
                                    <li>Personalized Earth Science quests</li>
                                    <li>Quiz performance tracking</li>
                                    <li>Interactive learning modules</li>
                                    <li>Reward system for progress</li>
                                </ul>
                            </div>
                        </div>
                    `,
                    'about us': `
                        <div class="space-y-4">
                            <p><strong>About The Periodic Legends</strong></p>
                            <p>Developed by Elevate Studio, TPL is a turn-based RPG mobile app designed to enhance Earth Science education for General Academic Strand students at Caloocan High School.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="glass-effect p-3 rounded-lg">
                                    <h4 class="text-yellow-400 mb-2">Our Mission</h4>
                                    <p class="text-sm">Increase student engagement and comprehension in Earth Science through gamified learning, aligned with the Philippine K-12 curriculum.</p>
                                </div>
                                <div class="glass-effect p-3 rounded-lg">
                                    <h4 class="text-yellow-400 mb-2">Founded</h4>
                                    <p class="text-sm">2023 • STI College Caloocan</p>
                                </div>
                            </div>
                        </div>
                    `,
                    'contact': `
                        <div class="space-y-4">
                            <p><strong>Contact Us</strong></p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <h4 class="text-yellow-400 mb-2">Support</h4>
                                    <p>support@periodiclegends.com</p>
                                    <p>+63 (912) 345-6789</p>
                                </div>
                                <div>
                                    <h4 class="text-yellow-400 mb-2">School Inquiries</h4>
                                    <p>admin@periodiclegends.com</p>
                                    <p>Caloocan High School partnerships</p>
                                </div>
                            </div>
                            <div class="mt-4 space-y-3">
                                <input type="text" placeholder="Your email" class="w-full p-2 glass-effect rounded">
                                <textarea placeholder="Your message" rows="3" class="w-full p-2 glass-effect rounded"></textarea>
                                <button type="button" class="bg-yellow-500 text-black px-6 py-2 rounded btn-glow hover:bg-yellow-600">Send Message</button>
                            </div>
                        </div>
                    `,
                    'blog': `
                        <div class="space-y-4">
                            <p><strong>TPL Updates</strong></p>
                            <div class="space-y-3">
                                <div class="glass-effect p-3 rounded-lg">
                                    <h5 class="text-yellow-400">New Geology Quests</h5>
                                    <p class="text-sm text-gray-300">Explore rock formations and plate tectonics in our latest update for GAS students.</p>
                                    <p class="text-xs text-gray-500">April 10, 2025</p>
                                </div>
                                <div class="glass-effect p-3 rounded-lg">
                                    <h5 class="text-yellow-400">Teacher Analytics Launched</h5>
                                    <p class="text-sm text-gray-300">Track student progress with our new web-based dashboard.</p>
                                    <p class="text-xs text-gray-500">March 20, 2025</p>
                                </div>
                            </div>
                        </div>
                    `,
                    'help center': `
                        <div class="space-y-4">
                            <p><strong>Help & Support</strong></p>
                            <p>Find solutions for using The Periodic Legends at Caloocan High School.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="glass-effect p-3 rounded-lg">
                                    <h4 class="text-yellow-400 mb-2">Getting Started</h4>
                                    <ul class="text-sm space-y-1">
                                        <li>Download and install the Android app</li>
                                        <li>Register with your Student ID</li>
                                        <li>Navigate the main menu and start quests</li>
                                    </ul>
                                </div>
                                <div class="glass-effect p-3 rounded-lg">
                                    <h4 class="text-yellow-400 mb-2">Troubleshooting</h4>
                                    <ul class="text-sm space-y-1">
                                        <li>Login issues: Check internet and credentials</li>
                                        <li>Quiz sync errors: Ensure stable Wi-Fi</li>
                                        <li>Contact support for app crashes</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="text-sm">For detailed guides, contact support@periodiclegends.com</p>
                        </div>
                    `,
                    'privacy policy': `
                        <div class="space-y-4 prose prose-invert max-w-none">
                            <h3>Privacy Policy</h3>
                            <p>The Periodic Legends respects your privacy and is committed to protecting personal data of GAS students and teachers at Caloocan High School.</p>
                            <h4>Data We Collect</h4>
                            <ul>
                                <li>Student ID and name</li>
                                <li>Quiz performance and quest progress</li>
                                <li>Device information (e.g., Android version)</li>
                                <li>Usage analytics for educational insights</li>
                            </ul>
                            <h4>How We Use Data</h4>
                            <p>Data is used to track learning progress, provide personalized feedback, and improve the app. No data is shared with third parties except for educational purposes within Caloocan High School.</p>
                            <p><strong>Last updated:</strong> April 2025</p>
                        </div>
                    `,
                    'terms of service': `
                        <div class="space-y-4">
                            <h3 class="text-yellow-400">Terms of Service</h3>
                            <p>By using The Periodic Legends, you agree to these terms for educational use at Caloocan High School.</p>
                            <div class="glass-effect p-3 rounded-lg">
                                <h4 class="text-yellow-400 mb-2">Key Terms:</h4>
                                <ul class="list-disc list-inside text-sm space-y-1">
                                    <li>For GAS students and teachers only</li>
                                    <li>No commercial use or redistribution</li>
                                    <li>Requires internet for full functionality</li>
                                    <li>Account termination for misuse</li>
                                </ul>
                            </div>
                            <p class="text-sm">Contact admin@periodiclegends.com for inquiries.</p>
                        </div>
                    `
                };
                let content = '<p class="text-gray-400">Content not available yet.</p>';
                for (const [key, value] of Object.entries(footerContent)) {
                    if (linkText.includes(key)) {
                        content = value;
                        break;
                    }
                }
                openFooterModal(this.textContent.trim(), content);
            });
        });

        // Close footer modal on click outside
        document.getElementById('footerModals').addEventListener('click', function(e) {
            if (e.target.id === 'footerModals') {
                closeFooterModal();
            }
        });

        // Contact modal functionality
        function openContactModal(message, isError = false) {
            const modal = document.getElementById('contactModal');
            const modalMessage = document.getElementById('contactModalMessage');
            modalMessage.textContent = message;
            modalMessage.classList.toggle('text-red-500', isError);
            modalMessage.classList.toggle('text-green-500', !isError);
            modal.classList.remove('hidden');
            const closeButton = document.getElementById('closeContactModal');
            const closeBtn = document.getElementById('closeContactModalBtn');
            if (closeButton) {
                closeButton.addEventListener('click', closeContactModal);
            }
            if (closeBtn) {
                closeBtn.addEventListener('click', closeContactModal);
            }
        }

        function closeContactModal() {
            const modal = document.getElementById('contactModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }

        document.getElementById('contactModal').addEventListener('click', function(e) {
            if (e.target.id === 'contactModal') {
                closeContactModal();
            }
        });

        // Initialize Supabase Client
        let supabase;
        try {
            supabase = window.supabase.createClient(
                'https://kckasgowvaguzkdlpdyw.supabase.co',
                'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtja2FzZ293dmFndXprZGxwZHl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1NjYxMTYsImV4cCI6MjA1ODE0MjExNn0.XEz-ctZwaduNZw0vtYySSVgBkF7mseKLbBtk2_ABRX8'
            );
            console.log("Supabase initialized:");
        } catch (err) {
            console.error("Supabase initialization failed:", err);
        }

        async function handleContactFormSubmission() {
            const name = document.getElementById('name')?.value;
            const email = document.getElementById('email')?.value;
            const inquiryType = document.getElementById('inquiry-type')?.value;
            const message = document.getElementById('contact-message-text')?.value;
            const newsletter = document.getElementById('newsletter')?.checked;
            const messageBox = document.getElementById('contact-message');
            
            if (!messageBox) {
                console.error("Contact message box not found");
                return;
            }
            
            if (!name || !email || !message) {
                messageBox.textContent = "⚠️ Please fill in all required fields.";
                messageBox.classList.add('text-red-500');
                return;
            }

            try {
                // Send email using EmailJS
                const templateParams = {
                    from_name: name,
                    from_email: email,
                    inquiry_type: inquiryType || 'General Inquiry',
                    message: message,
                    newsletter: newsletter ? 'Yes' : 'No',
                    to_email: 'elevatestudiobiz03@gmail.com'
                };

                // Replace 'YOUR_SERVICE_ID' and 'YOUR_TEMPLATE_ID' with your EmailJS service and template IDs
                // You can get these from https://dashboard.emailjs.com/admin
                const response = await emailjs.send(
                    'service_y9aptb7',    // Replace with your EmailJS service ID
                    'template_wf6by98',   // Replace with your EmailJS template ID
                    templateParams
                );

                if (response.status === 200) {
                    openContactModal("✅ Message sent successfully! We'll respond within 24-48 hours.");
                    document.getElementById('contact-form').reset();
                    messageBox.textContent = "";
                    messageBox.classList.remove('text-red-500');
                } else {
                    throw new Error('Email sending failed');
                }
            } catch (err) {
                console.error("Email sending error:", err);
                openContactModal("⚠️ Failed to send message. Please try again later.", true);
            }
        }

                // Secure Analytics Login Function
        async function loginAnalytics() {
            const teacherId = document.getElementById("analytics-teacher-id")?.value?.trim() || "";
            const password = document.getElementById("analytics-password")?.value;
            const messageBox = document.getElementById("analytics-message");

            if (!messageBox) {
                console.error("Analytics message box not found");
                return;
            }

            if (!teacherId || !password) {
                messageBox.textContent = "⚠️ Please enter both Teacher ID and Password.";
                messageBox.classList.add("text-red-500");
                return;
            }

            if (!TEACHER_ID_REGEX.test(teacherId)) {
                messageBox.textContent = "⚠️ Teacher ID must be exactly 6 numbers.";
                messageBox.classList.add("text-red-500");
                return;
            }

            if (!supabase) {
                messageBox.textContent = "⚠️ Database connection not initialized.";
                messageBox.classList.add("text-red-500");
                console.error("Supabase client not initialized");
                return;
            }

            try {
                const { data, error } = await supabase
                    .from("teacher")
                    .select("teacher_id, full_name, password, password_salt")
                    .eq("teacher_id", teacherId)
                    .single();

                if (error || !data) {
                    messageBox.textContent = "❌ Invalid Teacher ID or Password.";
                    messageBox.classList.add("text-red-500");
                    return;
                }

                const hashedInputPassword = await hashPassword(password, data.password_salt);

                if (hashedInputPassword === data.password) {
                    messageBox.textContent = "✅ Login Successful! Redirecting...";
                    messageBox.classList.remove("text-red-500");
                    messageBox.classList.add("text-green-500");

                    const firstName = data.full_name.split(" ")[0];
                    localStorage.setItem("teacherId", data.teacher_id);
                    localStorage.setItem("teacherFirstName", firstName);

                    setTimeout(() => {
                        window.location.href = "Teacher_Dashboard.html";
                    }, 1500);
                } else {
                    messageBox.textContent = "❌ Invalid Teacher ID or Password.";
                    messageBox.classList.add("text-red-500");
                }
            } catch (err) {
                console.error("Analytics Login Error:", err);
                messageBox.textContent = "⚠️ An error occurred. Please try again later.";
                messageBox.classList.add("text-red-500");
            }
        }

        // Unified Login Function - checks both student and teacher tables
        async function loginUnified() {
            const userId = document.getElementById("user-id")?.value?.trim() || "";
            const password = document.getElementById("user-password")?.value;
            const messageBox = document.getElementById("message");

            if (!messageBox) {
                console.error("Message box not found");
                return;
            }

            // Validate user ID is exactly 6 numbers
            if (!userId || userId.length !== 6 || !/^[0-9]{6}$/.test(userId)) {
                messageBox.textContent = "⚠️ ID must be exactly 6 numbers.";
                messageBox.classList.add("text-red-500");
                messageBox.classList.remove("text-green-500");
                return;
            }

            if (!userId || !password) {
                messageBox.textContent = "⚠️ Please enter both ID and Password.";
                messageBox.classList.add("text-red-500");
                messageBox.classList.remove("text-green-500");
                return;
            }

            if (!supabase) {
                messageBox.textContent = "⚠️ Database connection not initialized.";
                messageBox.classList.add("text-red-500");
                messageBox.classList.remove("text-green-500");
                console.error("Supabase client not initialized");
                return;
            }

            try {
                // First, try to find the user as a student
                let { data: studentData, error: studentError } = await supabase
                    .from("student")
                    .select("student_id, full_name, password, password_salt")
                    .eq("student_id", userId)
                    .single();

                // If found as student, verify password
                if (!studentError && studentData) {
                    const hashedInputPassword = await hashPassword(password, studentData.password_salt);
                    
                    if (hashedInputPassword === studentData.password) {
                        messageBox.textContent = "✅ Login Successful! Redirecting...";
                        messageBox.classList.remove("text-red-500");
                        messageBox.classList.add("text-green-500");

                        const firstName = studentData.full_name.split(" ")[0];
                        localStorage.setItem("studentId", studentData.student_id);
                        localStorage.setItem("studentFirstName", firstName);

                        setTimeout(() => {
                            window.location.href = "Student_Dashboard.html";
                        }, 1500);
                        return;
                    }
                }

                // If not found as student or password doesn't match, try teacher
                let { data: teacherData, error: teacherError } = await supabase
                    .from("teacher")
                    .select("teacher_id, full_name, password, password_salt")
                    .eq("teacher_id", userId)
                    .single();

                // If found as teacher, verify password
                if (!teacherError && teacherData) {
                    const hashedInputPassword = await hashPassword(password, teacherData.password_salt);
                    
                    if (hashedInputPassword === teacherData.password) {
                        messageBox.textContent = "✅ Login Successful! Redirecting...";
                        messageBox.classList.remove("text-red-500");
                        messageBox.classList.add("text-green-500");

                        const firstName = teacherData.full_name.split(" ")[0];
                        localStorage.setItem("teacherId", teacherData.teacher_id);
                        localStorage.setItem("teacherFirstName", firstName);

                        setTimeout(() => {
                            window.location.href = "Teacher_Dashboard.html";
                        }, 1500);
                        return;
                    }
                }

                // If we reach here, credentials are invalid
                messageBox.textContent = "❌ Invalid ID or Password.";
                messageBox.classList.add("text-red-500");
                messageBox.classList.remove("text-green-500");
            } catch (err) {
                console.error("Login Error:", err);
                messageBox.textContent = "⚠️ An error occurred. Please try again later.";
                messageBox.classList.add("text-red-500");
                messageBox.classList.remove("text-green-500");
            }
        }

        // Hash Password with Salt (SHA-256)
        async function hashPassword(password, salt) {
            const encoder = new TextEncoder();
            const saltedPassword = password + salt;
            const data = encoder.encode(saltedPassword);
            const hashBuffer = await crypto.subtle.digest("SHA-256", data);
            return Array.from(new Uint8Array(hashBuffer))
                .map(byte => byte.toString(16).padStart(2, "0"))
                .join("");
        }

        // Mobile menu toggle
        const menuToggle = document.getElementById('menu-toggle');
        if (menuToggle) {
            menuToggle.addEventListener('click', function() {
                document.getElementById('mobile-menu').classList.remove('translate-x-full');
            });
        }
        const menuClose = document.getElementById('menu-close');
        if (menuClose) {
            menuClose.addEventListener('click', function() {
                document.getElementById('mobile-menu').classList.add('translate-x-full');
            });
        }

        function toggleModal(show) {
            const modal = document.getElementById('signInModal');
            if (modal) {
                modal.classList.toggle('hidden', !show);
            }
        }


        const signInBtn = document.getElementById('signInBtn');
        const signInMobileBtn = document.getElementById('signInMobileBtn');
        const closeModalBtn = document.getElementById('closeModal');
        const signInModal = document.getElementById('signInModal');
        if (signInBtn) {
            signInBtn.addEventListener('click', () => toggleModal(true));
        }
        if (signInMobileBtn) {
            signInMobileBtn.addEventListener('click', () => toggleModal(true));
        }
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', () => toggleModal(false));
        }
        if (signInModal) {
            signInModal.addEventListener('click', function(event) {
                if (event.target === this) {
                    toggleModal(false);
                }
            });
        }
    });
    </script>
</body>
</html>
